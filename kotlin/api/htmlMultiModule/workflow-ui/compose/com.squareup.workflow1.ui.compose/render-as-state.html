<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>renderAsState</title>
<link href="../../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../../";</script>    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async></script>
<link href="../../../styles/style.css" rel="Stylesheet">
<link href="../../../styles/jetbrains-mono.css" rel="Stylesheet">
<link href="../../../styles/main.css" rel="Stylesheet">
<link href="../../../styles/prism.css" rel="Stylesheet">
<link href="../../../styles/logo-styles.css" rel="Stylesheet">
<script type="text/javascript" src="../../../scripts/clipboard.js" async></script>
<script type="text/javascript" src="../../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../../scripts/symbol-parameters-wrapper_deferred.js" defer></script></head>
<body>
<div class="navigation-wrapper" id="navigation-wrapper">
    <div id="leftToggler"><span class="icon-toggler"></span></div>
    <div class="library-name">
<a href="../../../index.html">
<span>workflow</span>            </a>    </div>
    <div>
    </div>
    <div class="pull-right d-flex">
        <button id="theme-toggle-button"><span id="theme-toggle"></span></button>
        <div id="searchBar"></div>
    </div>
</div>
<div id="container">
    <div id="leftColumn">
        <div id="sideMenu"></div>
    </div>
    <div id="main">
<div class="main-content" id="content" pageids="workflow-ui-compose::com.squareup.workflow1.ui.compose//renderAsState/com.squareup.workflow1.Workflow[TypeParam(bounds=[kotlin.Any?]),TypeParam(bounds=[kotlin.Any]),TypeParam(bounds=[kotlin.Any?])]#TypeParam(bounds=[kotlin.Any?])#kotlin.collections.List[com.squareup.workflow1.WorkflowInterceptor]#kotlinx.coroutines.CoroutineScope#com.squareup.workflow1.RuntimeConfig#kotlin.coroutines.SuspendFunction1[TypeParam(bounds=[kotlin.Any]),kotlin.Unit]/PointingToDeclaration//232754475">
  <div class="breadcrumbs"><a href="../index.html">workflow-ui-compose</a><span class="delimiter">/</span><a href="index.html">com.squareup.workflow1.ui.compose</a><span class="delimiter">/</span><span class="current">renderAsState</span></div>
  <div class="cover ">
    <h1 class="cover"><span>render</span><wbr><span>As</span><wbr><span><span>State</span></span></h1>
  </div>
  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="symbol monospace"><div class="block"><div class="block"><span class="token annotation builtin">@</span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/Composable.html"><span class="token annotation builtin">Composable</span></a></div></div><span class="token keyword"></span><span class="token keyword">fun </span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="render-as-state.html">PropsT</a><span class="token punctuation">, </span><span class="token keyword"></span><a href="render-as-state.html">OutputT</a><span class="token operator"> : </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html">Any</a><span class="token punctuation">, </span><span class="token keyword"></span><a href="render-as-state.html">RenderingT</a><span class="token operator">&gt; </span><a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a><span class="token operator">&lt;</span><span class="token keyword"></span><a href="render-as-state.html">PropsT</a><span class="token punctuation">, </span><span class="token keyword"></span><a href="render-as-state.html">OutputT</a><span class="token punctuation">, </span><span class="token keyword"></span><a href="render-as-state.html">RenderingT</a><span class="token operator">&gt;</span><span class="token punctuation">.</span><a href="render-as-state.html"><span class="token function">renderAsState</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">props<span class="token operator">: </span><a href="render-as-state.html">PropsT</a><span class="token punctuation">, </span></span><span class="parameter ">interceptors<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html">List</a><span class="token operator">&lt;</span><span class="token keyword"></span><a href="../../../workflow-core/com.squareup.workflow1/-workflow-interceptor/index.html">WorkflowInterceptor</a><span class="token operator">&gt;</span><span class="token operator"> = </span>emptyList()<span class="token punctuation">, </span></span><span class="parameter ">scope<span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span><span class="token operator"> = </span>rememberCoroutineScope()<span class="token punctuation">, </span></span><span class="parameter ">runtimeConfig<span class="token operator">: </span><a href="../../../workflow-core/com.squareup.workflow1/-runtime-config/index.html">RuntimeConfig</a><span class="token operator"> = </span>RuntimeConfig.DEFAULT_CONFIG<span class="token punctuation">, </span></span><span class="parameter ">onOutput<span class="token operator">: </span><span class="token keyword">suspend </span><span class="token punctuation">(</span><span class="token keyword"></span><a href="render-as-state.html">OutputT</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a></span></span><span class="token punctuation">)</span><span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State.html">State</a><span class="token operator">&lt;</span><span class="token keyword"></span><a href="render-as-state.html">RenderingT</a><span class="token operator">&gt;</span></div><p class="paragraph">Runs this <a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a> as long as this composable is part of the composition, and returns a <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State.html">State</a> object that will be updated whenever the runtime emits a new <a href="render-as-state.html">RenderingT</a>. Note that here, and in the rest of the documentation for this class, the "<code class="lang-kotlin">State</code>" type refers to Compose's snapshot <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State.html">State</a> type, <i>not</i> the concept of the <code class="lang-kotlin">StateT</code> type in a particular workflow.</p><p class="paragraph">The workflow runtime will be started when this function is first added to the composition, and cancelled when it is removed or if the composition fails. The first rendering will be available immediately as soon as this function returns as <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State.html#value">State.value</a>. Composables that read this value will automatically recompose whenever the runtime emits a new rendering. If you are driving UI from the Workflow tree managed by <a href="render-as-state.html">renderAsState</a> then you will probably want to pass the returned <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State.html">State</a>'s value (which is the Workflow rendering) to the <a href="../../../workflow-ui/compose/com.squareup.workflow1.ui.compose/index.html">WorkflowRendering</a> composable.</p><p class="paragraph"><a href="../../../workflow-core/com.squareup.workflow1/-snapshot/index.html">Snapshot</a>s from the runtime will automatically be saved and restored using Compose's <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/saveable/package-summary.html">rememberSaveable</a>.</p><h2 class=""> Example</h2><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">private val appViewRegistry = ViewRegistry(…)<br><br>@Composable fun App(workflow: Workflow&lt;…&gt;, props: Props) {<br>  val scaffoldState = …<br><br>  // Run the workflow in the current composition's coroutine scope.<br>  val rendering by workflow.renderAsState(props, onOutput = { output -&gt;<br>    // Note that onOutput is a suspend function, so you can run animations<br>    // and call other suspend functions.<br>    scaffoldState.snackbarHostState<br>      .showSnackbar(output.toString())<br>  })<br>  val viewEnvironment = remember {<br>    ViewEnvironment(mapOf(ViewRegistry to appViewRegistry))<br>  }<br><br>  Scaffold(…) { padding -&gt;<br>    // Display the root rendering using the view environment's ViewRegistry.<br>    WorkflowRendering(rendering, viewEnvironment, Modifier.padding(padding))<br>  }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class=""> Caveat on threading and composition</h2><p class="paragraph">Note that the initial render pass will occur on whatever thread this function is called from. That may be a background thread, as Compose supports performing composition on background threads. Well-behaved workflows should have pure <code class="lang-kotlin">initialState</code> and <code class="lang-kotlin">render</code> functions, so this should not be a problem. Any side effects performed by workflows using the <code class="lang-kotlin">runningSideEffect</code> method or Workers will be executed in <a href="render-as-state.html">scope</a> as usual.</p><p class="paragraph">Also note that composition is an operation that may fail, or be cancelled, and the "result" of a given composition pass may be thrown away and never used to update UI. When this happens, the composition is said to have failed to commit. If the composition that initializes a workflow runtime using this function fails to commit, the runtime will be started and then immediately cancelled. Since the workflow runtime may perform side effects, this may cause effects that look like they spontaneously occur, or happen more often than they should.</p><span class="kdoc-tag"><h4 class="">Receiver</h4><p class="paragraph">The <a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a> to run. If the value of the receiver changes to a different <a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a> while this function is in the composition, the runtime will be restarted with the new workflow.</p></span><h4 class="">Parameters</h4><div data-togglable="Parameters"><div class="table" data-togglable="Parameters"><div class="table-row" data-filterable-current=":workflow-ui:compose:dokkaHtmlPartial/release" data-filterable-set=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span><span>props</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">The <a href="render-as-state.html">PropsT</a> for the root <a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a>. Changes to this value across different compositions will cause the root workflow to re-render with the new props.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":workflow-ui:compose:dokkaHtmlPartial/release" data-filterable-set=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span><span>interceptors</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">An optional list of <a href="../../../workflow-core/com.squareup.workflow1/-workflow-interceptor/index.html">WorkflowInterceptor</a>s that will wrap every workflow rendered by the runtime. Interceptors will be invoked in 0-to-<code class="lang-kotlin">length</code> order: the interceptor at index 0 will process the workflow first, then the interceptor at index 1, etc.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":workflow-ui:compose:dokkaHtmlPartial/release" data-filterable-set=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span><span>scope</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">The <span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span> in which to launch the workflow runtime. If not specified, the value of <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary.html">rememberCoroutineScope</a> will be used. Any exceptions thrown in any workflows, after the initial render pass, will be handled by this scope, and cancelling this scope will cancel the workflow runtime and any running workers. Note that any dispatcher in this scope will <i>not</i> be used to execute the very first render pass.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":workflow-ui:compose:dokkaHtmlPartial/release" data-filterable-set=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span>runtime</span><wbr><span><span>Config</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">The <a href="../../../workflow-core/com.squareup.workflow1/-runtime-config/index.html">RuntimeConfig</a> for the Workflow runtime started to power this state.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":workflow-ui:compose:dokkaHtmlPartial/release" data-filterable-set=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span>on</span><wbr><span><span>Output</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">A function that will be executed whenever the root <a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a> emits an output.</p></div></div></div></div></div></div></div></div></div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2023 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
    </div>
</div>

</body></html>

