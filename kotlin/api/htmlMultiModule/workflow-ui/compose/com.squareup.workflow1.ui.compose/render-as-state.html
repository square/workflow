<!doctype html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>renderAsState</title>
<link href="../../../images/logo-icon.svg" rel="icon" type="image/svg">    <script>var pathToRoot = "../../../";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async></script>
<script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async></script>
<link href="../../../styles/style.css" rel="Stylesheet">
<link href="../../../styles/main.css" rel="Stylesheet">
<link href="../../../styles/prism.css" rel="Stylesheet">
<link href="../../../styles/logo-styles.css" rel="Stylesheet">
<link href="../../../styles/font-jb-sans-auto.css" rel="Stylesheet">
<link href="../../../ui-kit/ui-kit.min.css" rel="Stylesheet">
<script type="text/javascript" src="../../../scripts/clipboard.js" async></script>
<script type="text/javascript" src="../../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../../ui-kit/ui-kit.min.js" defer></script>
<script type="text/javascript" src="../../../scripts/symbol-parameters-wrapper_deferred.js" defer></script></head>
<body>
    <div class="root">
    <nav class="navigation theme-dark" id="navigation-wrapper">
<a class="library-name--link" href="../../../index.html">
                    workflow
            </a>        <button class="navigation-controls--btn navigation-controls--btn_toc ui-kit_mobile-only" id="toc-toggle" type="button">Toggle table of contents
        </button>
        <div class="navigation-controls--break ui-kit_mobile-only"></div>
        <div class="library-version" id="library-version">
        </div>
        <div class="navigation-controls">
        <div class="filter-section filter-section_loading" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":workflow-ui:compose:dokkaHtmlPartial/release">androidJvm</button>
            <div class="dropdown filter-section--dropdown" data-role="dropdown" id="filter-section-dropdown">
                <button class="button button_dropdown filter-section--dropdown-toggle" role="combobox" data-role="dropdown-toggle" aria-controls="platform-tags-listbox" aria-haspopup="listbox" aria-expanded="false" aria-label="Toggle source sets"></button>
                <ul role="listbox" id="platform-tags-listbox" class="dropdown--list" data-role="dropdown-listbox">
                    <div class="dropdown--header"><span>Platform filter</span>
                        <button class="button" data-role="dropdown-toggle" aria-label="Close platform filter">
                            <i class="ui-kit-icon ui-kit-icon_cross"></i>
                        </button>
                    </div>
                        <li role="option" class="dropdown--option platform-selector-option jvm-like" tabindex="0">
                            <label class="checkbox">
                                <input type="checkbox" class="checkbox--input" id=":workflow-ui:compose:dokkaHtmlPartial/release" data-filter=":workflow-ui:compose:dokkaHtmlPartial/release">
                                <span class="checkbox--icon"></span>
                                androidJvm
                            </label>
                        </li>
                </ul>
                <div class="dropdown--overlay"></div>
            </div>
        </div>
            <button class="navigation-controls--btn navigation-controls--btn_theme" id="theme-toggle-button" type="button">Switch theme
            </button>
            <div class="navigation-controls--btn navigation-controls--btn_search" id="searchBar" role="button">Search in
                API
            </div>
        </div>
    </nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="dropdown theme-dark_mobile" data-role="dropdown" id="toc-dropdown">
                    <ul role="listbox" id="toc-listbox" class="dropdown--list dropdown--list_toc-list" data-role="dropdown-listbox">
                        <div class="dropdown--header">
                            <span>
                                    workflow
                            </span>
                            <button class="button" data-role="dropdown-toggle" aria-label="Close table of contents">
                                <i class="ui-kit-icon ui-kit-icon_cross"></i>
                            </button>
                        </div>
                        <div class="sidebar--inner" id="sideMenu"></div>
                    </ul>
                    <div class="dropdown--overlay"></div>
                </div>
            </div>
            <div id="main">
<div class="main-content" data-page-type="member" id="content" pageids="workflow-ui-compose::com.squareup.workflow1.ui.compose//renderAsState/com.squareup.workflow1.Workflow[TypeParam(bounds=[kotlin.Any?]),TypeParam(bounds=[kotlin.Any]),TypeParam(bounds=[kotlin.Any?])]#TypeParam(bounds=[kotlin.Any?])#kotlin.collections.List[com.squareup.workflow1.WorkflowInterceptor]#kotlinx.coroutines.CoroutineScope#kotlin.collections.Set[com.squareup.workflow1.RuntimeConfigOptions]#kotlin.coroutines.SuspendFunction1[TypeParam(bounds=[kotlin.Any]),kotlin.Unit]/PointingToDeclaration//232754475">
  <div class="breadcrumbs"><a href="../index.html">workflow-ui-compose</a><span class="delimiter">/</span><a href="index.html">com.squareup.workflow1.ui.compose</a><span class="delimiter">/</span><span class="current">renderAsState</span></div>
  <div class="cover ">
    <h1 class="cover"><span>render</span><wbr><span>As</span><wbr><span><span>State</span></span></h1>
  </div>
  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="symbol monospace"><div class="block"><div class="block"><span class="token annotation builtin">@</span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/Composable.html"><span class="token annotation builtin">Composable</span></a></div></div><span class="token keyword">fun </span><span class="token operator">&lt;</span><a href="render-as-state.html">PropsT</a><span class="token punctuation">, </span><a href="render-as-state.html">OutputT</a><span class="token operator"> : </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-any/index.html">Any</a><span class="token punctuation">, </span><a href="render-as-state.html">RenderingT</a><span class="token operator">&gt; </span><a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a><span class="token operator">&lt;</span><a href="render-as-state.html">PropsT</a><span class="token punctuation">, </span><a href="render-as-state.html">OutputT</a><span class="token punctuation">, </span><a href="render-as-state.html">RenderingT</a><span class="token operator">&gt;</span><span class="token punctuation">.</span><a href="render-as-state.html"><span class="token function">renderAsState</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">props<span class="token operator">: </span><a href="render-as-state.html">PropsT</a><span class="token punctuation">, </span></span><span class="parameter ">interceptors<span class="token operator">: </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin.collections/-list/index.html">List</a><span class="token operator">&lt;</span><a href="../../../workflow-runtime/com.squareup.workflow1/-workflow-interceptor/index.html">WorkflowInterceptor</a><span class="token operator">&gt;</span><span class="token operator"> = </span>emptyList()<span class="token punctuation">, </span></span><span class="parameter ">scope<span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span><span class="token operator"> = </span>rememberCoroutineScope()<span class="token punctuation">, </span></span><span class="parameter ">runtimeConfig<span class="token operator">: </span><a href="../../../workflow-core/com.squareup.workflow1/-runtime-config/index.html">RuntimeConfig</a><span class="token operator"> = </span>RuntimeConfigOptions.DEFAULT_CONFIG<span class="token punctuation">, </span></span><span class="parameter ">onOutput<span class="token operator">: </span><span class="token keyword">suspend </span><span class="token punctuation">(</span><a href="render-as-state.html">OutputT</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><a href="https://kotlinlang.org/api/core/kotlin-stdlib/kotlin/-unit/index.html">Unit</a></span></span><span class="token punctuation">)</span><span class="token operator">: </span><a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State.html">State</a><span class="token operator">&lt;</span><a href="render-as-state.html">RenderingT</a><span class="token operator">&gt;</span></div><p class="paragraph">Runs this <a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a> as long as this composable is part of the composition, and returns a <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State.html">State</a> object that will be updated whenever the runtime emits a new <a href="render-as-state.html">RenderingT</a>. Note that here, and in the rest of the documentation for this class, the "<code class="lang-kotlin">State</code>" type refers to Compose's snapshot <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State.html">State</a> type, <i>not</i> the concept of the <code class="lang-kotlin">StateT</code> type in a particular workflow.</p><p class="paragraph">The workflow runtime will be started when this function is first added to the composition, and cancelled when it is removed or if the composition fails. The first rendering will be available immediately as soon as this function returns as <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State.html#value">State.value</a>. Composables that read this value will automatically recompose whenever the runtime emits a new rendering. If you are driving UI from the Workflow tree managed by <a href="render-as-state.html">renderAsState</a> then you will probably want to pass the returned <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State.html">State</a>'s value (which is the Workflow rendering) to the <a href="-workflow-rendering.html">WorkflowRendering</a> composable.</p><p class="paragraph"><a href="../../../workflow-core/com.squareup.workflow1/-snapshot/index.html">Snapshot</a>s from the runtime will automatically be saved and restored using Compose's <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/saveable/package-summary.html">rememberSaveable</a>.</p><h2 class="">Example</h2><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">private val appViewRegistry = ViewRegistry(…)<br><br>@Composable fun App(workflow: Workflow&lt;…&gt;, props: Props) {<br>  val scaffoldState = …<br><br>  // Run the workflow in the current composition's coroutine scope.<br>  val rendering by workflow.renderAsState(props, onOutput = { output -&gt;<br>    // Note that onOutput is a suspend function, so you can run animations<br>    // and call other suspend functions.<br>    scaffoldState.snackbarHostState<br>      .showSnackbar(output.toString())<br>  })<br>  val viewEnvironment = remember {<br>    ViewEnvironment(mapOf(ViewRegistry to appViewRegistry))<br>  }<br><br>  Scaffold(…) { padding -&gt;<br>    // Display the root rendering using the view environment's ViewRegistry.<br>    WorkflowRendering(rendering, viewEnvironment, Modifier.padding(padding))<br>  }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class="">Caveat on threading and composition</h2><p class="paragraph">Note that the initial render pass will occur on whatever thread this function is called from. That may be a background thread, as Compose supports performing composition on background threads. Well-behaved workflows should have pure <code class="lang-kotlin">initialState</code> and <code class="lang-kotlin">render</code> functions, so this should not be a problem. Any side effects performed by workflows using the <code class="lang-kotlin">runningSideEffect</code> method or Workers will be executed in <a href="render-as-state.html">scope</a> as usual.</p><p class="paragraph">Also note that composition is an operation that may fail, or be cancelled, and the "result" of a given composition pass may be thrown away and never used to update UI. When this happens, the composition is said to have failed to commit. If the composition that initializes a workflow runtime using this function fails to commit, the runtime will be started and then immediately cancelled. Since the workflow runtime may perform side effects, this may cause effects that look like they spontaneously occur, or happen more often than they should.</p><span class="kdoc-tag"><h4 class="">Receiver</h4><p class="paragraph">The <a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a> to run. If the value of the receiver changes to a different <a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a> while this function is in the composition, the runtime will be restarted with the new workflow.</p></span><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":workflow-ui:compose:dokkaHtmlPartial/release" data-filterable-set=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>props</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The <a href="render-as-state.html">PropsT</a> for the root <a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a>. Changes to this value across different compositions will cause the root workflow to re-render with the new props.</p></div></div></div></div><div class="table-row" data-filterable-current=":workflow-ui:compose:dokkaHtmlPartial/release" data-filterable-set=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>interceptors</span></span></u></div></span></div><div><div class="title"><p class="paragraph">An optional list of <a href="../../../workflow-runtime/com.squareup.workflow1/-workflow-interceptor/index.html">WorkflowInterceptor</a>s that will wrap every workflow rendered by the runtime. Interceptors will be invoked in 0-to-<code class="lang-kotlin">length</code> order: the interceptor at index 0 will process the workflow first, then the interceptor at index 1, etc.</p></div></div></div></div><div class="table-row" data-filterable-current=":workflow-ui:compose:dokkaHtmlPartial/release" data-filterable-set=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span><span>scope</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The <span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span> in which to launch the workflow runtime. If not specified, the value of <a href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/package-summary.html">rememberCoroutineScope</a> will be used. Any exceptions thrown in any workflows, after the initial render pass, will be handled by this scope, and cancelling this scope will cancel the workflow runtime and any running workers. Note that any dispatcher in this scope will <i>not</i> be used to execute the very first render pass.</p></div></div></div></div><div class="table-row" data-filterable-current=":workflow-ui:compose:dokkaHtmlPartial/release" data-filterable-set=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>runtime</span><wbr><span><span>Config</span></span></u></div></span></div><div><div class="title"><p class="paragraph">The <a href="../../../workflow-core/com.squareup.workflow1/-runtime-config/index.html">RuntimeConfig</a> for the Workflow runtime started to power this state.</p></div></div></div></div><div class="table-row" data-filterable-current=":workflow-ui:compose:dokkaHtmlPartial/release" data-filterable-set=":workflow-ui:compose:dokkaHtmlPartial/release"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>on</span><wbr><span><span>Output</span></span></u></div></span></div><div><div class="title"><p class="paragraph">A function that will be executed whenever the root <a href="../../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a> emits an output.</p></div></div></div></div></div></div></div>
</div>
    <div class="footer">
        <a href="#content" id="go-to-top-link" class="footer--button footer--button_go-to-top"></a>
        <span>© 2025 Copyright</span>
        <span class="pull-right">
            <span>Generated by </span>
            <a class="footer--link footer--link_external" href="https://github.com/Kotlin/dokka">
                <span>dokka</span>
            </a>
        </span>
    </div>
            </div>
        </div>
    </div>
</body>
</html>
