<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>renderWorkflowIn</title>
<link href="../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../";</script>    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="../../scripts/sourceset_dependencies.js" async></script>
<link href="../../styles/style.css" rel="Stylesheet">
<link href="../../styles/jetbrains-mono.css" rel="Stylesheet">
<link href="../../styles/main.css" rel="Stylesheet">
<link href="../../styles/prism.css" rel="Stylesheet">
<link href="../../styles/logo-styles.css" rel="Stylesheet">
<script type="text/javascript" src="../../scripts/clipboard.js" async></script>
<script type="text/javascript" src="../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../scripts/symbol-parameters-wrapper_deferred.js" defer></script></head>
<body>
<div class="navigation-wrapper" id="navigation-wrapper">
    <div id="leftToggler"><span class="icon-toggler"></span></div>
    <div class="library-name">
<a href="../../index.html">
<span>workflow</span>            </a>    </div>
    <div>
    </div>
    <div class="pull-right d-flex">
        <button id="theme-toggle-button"><span id="theme-toggle"></span></button>
        <div id="searchBar"></div>
    </div>
</div>
<div id="container">
    <div id="leftColumn">
        <div id="sideMenu"></div>
    </div>
    <div id="main">
<div class="main-content" id="content" pageids="workflow-runtime::com.squareup.workflow1//renderWorkflowIn/#com.squareup.workflow1.Workflow[TypeParam(bounds=[kotlin.Any?]),TypeParam(bounds=[kotlin.Any?]),TypeParam(bounds=[kotlin.Any?])]#kotlinx.coroutines.CoroutineScope#kotlinx.coroutines.flow.StateFlow[TypeParam(bounds=[kotlin.Any?])]#com.squareup.workflow1.TreeSnapshot?#kotlin.collections.List[com.squareup.workflow1.WorkflowInterceptor]#com.squareup.workflow1.RuntimeConfig#kotlin.coroutines.SuspendFunction1[TypeParam(bounds=[kotlin.Any?]),kotlin.Unit]/PointingToDeclaration//-1625139255">
  <div class="breadcrumbs"><a href="../index.html">workflow-runtime</a><span class="delimiter">/</span><a href="index.html">com.squareup.workflow1</a><span class="delimiter">/</span><span class="current">renderWorkflowIn</span></div>
  <div class="cover ">
    <h1 class="cover"><span>render</span><wbr><span>Workflow</span><wbr><span><span>In</span></span></h1>
  </div>
  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":workflow-runtime:dokkaHtmlPartial/commonMain"><div class="symbol monospace"><span class="token keyword"></span><span class="token keyword">fun </span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="render-workflow-in.html">PropsT</a><span class="token punctuation">, </span><span class="token keyword"></span><a href="render-workflow-in.html">OutputT</a><span class="token punctuation">, </span><span class="token keyword"></span><a href="render-workflow-in.html">RenderingT</a><span class="token operator">&gt; </span><a href="render-workflow-in.html"><span class="token function">renderWorkflowIn</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">workflow<span class="token operator">: </span><a href="../../workflow-core/com.squareup.workflow1/-workflow/index.html">Workflow</a><span class="token operator">&lt;</span><span class="token keyword"></span><a href="render-workflow-in.html">PropsT</a><span class="token punctuation">, </span><span class="token keyword"></span><a href="render-workflow-in.html">OutputT</a><span class="token punctuation">, </span><span class="token keyword"></span><a href="render-workflow-in.html">RenderingT</a><span class="token operator">&gt;</span><span class="token punctuation">, </span></span><span class="parameter ">scope<span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span><span class="token punctuation">, </span></span><span class="parameter ">props<span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines.flow/StateFlow///PointingToDeclaration/">StateFlow</span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="render-workflow-in.html">PropsT</a><span class="token operator">&gt;</span><span class="token punctuation">, </span></span><span class="parameter ">initialSnapshot<span class="token operator">: </span><a href="-tree-snapshot/index.html">TreeSnapshot</a><span class="token operator">?</span><span class="token operator"> = </span>null<span class="token punctuation">, </span></span><span class="parameter ">interceptors<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html">List</a><span class="token operator">&lt;</span><span class="token keyword"></span><a href="-workflow-interceptor/index.html">WorkflowInterceptor</a><span class="token operator">&gt;</span><span class="token operator"> = </span>emptyList()<span class="token punctuation">, </span></span><span class="parameter ">runtimeConfig<span class="token operator">: </span><a href="-runtime-config/index.html">RuntimeConfig</a><span class="token operator"> = </span>RuntimeConfig.DEFAULT_CONFIG<span class="token punctuation">, </span></span><span class="parameter ">onOutput<span class="token operator">: </span><span class="token keyword">suspend </span><span class="token punctuation">(</span><span class="token keyword"></span><a href="render-workflow-in.html">OutputT</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a></span></span><span class="token punctuation">)</span><span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines.flow/StateFlow///PointingToDeclaration/">StateFlow</span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="-rendering-and-snapshot/index.html">RenderingAndSnapshot</a><span class="token operator">&lt;</span><span class="token keyword"></span><a href="render-workflow-in.html">RenderingT</a><span class="token operator">&gt;</span><span class="token operator">&gt;</span><span class="clearfix"><span class="floating-right">(<a href="https://github.com/square/workflow-kotlin/blob/main/workflow-runtime/src/commonMain/kotlin/com/squareup/workflow1/RenderWorkflow.kt#L16">source</a>)</span></span></div><p class="paragraph">Launches the <a href="render-workflow-in.html">workflow</a> in a new coroutine in <a href="render-workflow-in.html">scope</a> and returns a <span data-unresolved-link="kotlinx.coroutines.flow/StateFlow///PointingToDeclaration/">StateFlow</span> of its <a href="render-workflow-in.html">renderings</a> and <a href="../../workflow-core/com.squareup.workflow1/-snapshot/index.html">snapshots</a>. The workflow tree is seeded with <a href="render-workflow-in.html">initialSnapshot</a> and the current value value of <a href="render-workflow-in.html">props</a>. Subsequent values emitted from <a href="render-workflow-in.html">props</a> will be used to re-render the workflow.</p><p class="paragraph">This is the primary low-level entry point into the workflow runtime. If you are writing an app, you should probably be using a higher-level entry point that will also let you define UI bindings for your renderings.</p><h2 class=""> Initialization</h2><p class="paragraph">When this function is called, the workflow runtime is started immediately, before the function even returns. The current value of the <span data-unresolved-link="kotlinx.coroutines.flow/StateFlow///PointingToDeclaration/">props</span> is used to perform the initial render pass. The result of this render pass is used to initialize the <span data-unresolved-link="kotlinx.coroutines.flow/StateFlow///PointingToDeclaration/">StateFlow</span> of renderings and snapshots that is returned.</p><p class="paragraph">Once the initial render pass is complete, the workflow runtime will continue executing in a new coroutine launched in <a href="render-workflow-in.html">scope</a>.</p><h2 class=""> Scoping</h2><p class="paragraph">The workflow runtime makes use of <a href="https://medium.com/@elizarov/structured-concurrency-722d765aa952">structured concurrency</a>.</p><p class="paragraph">The runtime is started in <a href="render-workflow-in.html">scope</a>, which defines the context for the entire workflow tree – most importantly, the <span data-unresolved-link="kotlinx.coroutines/Job///PointingToDeclaration/">Job</span> that governs the runtime's lifetime and exception reporting path, and the <span data-unresolved-link="kotlinx.coroutines/CoroutineDispatcher///PointingToDeclaration/">CoroutineDispatcher</span> that decides on what thread(s) to run workflow code. Note that if the scope's dispatcher executes on threads different than the caller, then the initial render pass will occur on the current thread but all subsequent render passes, and actions, will be executed on that dispatcher. This shouldn't affect well-written workflows, since the render method should not perform side effects anyway.</p><p class="paragraph">All workers that are run by this runtime will be collected in coroutines that are children of <a href="render-workflow-in.html">scope</a>. When the root workflow emits an output, <a href="render-workflow-in.html">onOutput</a> will be invoked in a child of <a href="render-workflow-in.html">scope</a>.</p><p class="paragraph">To stop the workflow runtime, simply cancel <a href="render-workflow-in.html">scope</a>. Any running workers will be cancelled, and if <a href="render-workflow-in.html">onOutput</a> is currently running it will be cancelled as well.</p><h2 class=""> Error handling</h2><p class="paragraph">If the initial render pass throws an exception, that exception will be thrown from this function. Any exceptions thrown from the runtime (and any workflows or workers) after that will bubble up and be handled by <a href="render-workflow-in.html">scope</a> (usually by cancelling it).</p><p class="paragraph">Since the <a href="render-workflow-in.html">onOutput</a> function is executed in <a href="render-workflow-in.html">scope</a>, any exceptions it throws will also bubble up to <a href="render-workflow-in.html">scope</a>. Any exceptions thrown by subscribers of the returned <span data-unresolved-link="kotlinx.coroutines.flow/StateFlow///PointingToDeclaration/">StateFlow</span> will <i>not</i> cancel <a href="render-workflow-in.html">scope</a> or cancel the runtime, but will be handled in the <span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span> of the subscriber.</p><span class="kdoc-tag"><h4 class="">Return</h4><p class="paragraph">A <span data-unresolved-link="kotlinx.coroutines.flow/StateFlow///PointingToDeclaration/">StateFlow</span> of <a href="-rendering-and-snapshot/index.html">RenderingAndSnapshot</a>s that will emit any time the root workflow creates a new rendering.</p></span><h4 class="">Parameters</h4><div data-togglable="Parameters"><div class="table" data-togglable="Parameters"><div class="table-row" data-filterable-current=":workflow-runtime:dokkaHtmlPartial/commonMain" data-filterable-set=":workflow-runtime:dokkaHtmlPartial/commonMain"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span><span>workflow</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">The root workflow to render.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":workflow-runtime:dokkaHtmlPartial/commonMain" data-filterable-set=":workflow-runtime:dokkaHtmlPartial/commonMain"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span><span>scope</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">The <span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span> in which to launch the workflow runtime. Any exceptions thrown in any workflows, after the initial render pass, will be handled by this scope, and cancelling this scope will cancel the workflow runtime and any running workers. Note that any dispatcher in this scope will <i>not</i> be used to execute the very first render pass.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":workflow-runtime:dokkaHtmlPartial/commonMain" data-filterable-set=":workflow-runtime:dokkaHtmlPartial/commonMain"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span><span>props</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">Specifies the initial <a href="render-workflow-in.html">PropsT</a> to use to render the root workflow, and will cause a re-render when new props are emitted. If this flow completes <i>after</i> emitting at least one value, the runtime will <i>not</i> fail or stop, it will continue running with the last-emitted input. To only pass a single props value, simply create a <span data-unresolved-link="kotlinx.coroutines.flow/MutableStateFlow///PointingToDeclaration/">MutableStateFlow</span> with the value.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":workflow-runtime:dokkaHtmlPartial/commonMain" data-filterable-set=":workflow-runtime:dokkaHtmlPartial/commonMain"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span>initial</span><wbr><span><span>Snapshot</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">If not null or empty, used to restore the workflow. Should be obtained from a previous runtime's <a href="-rendering-and-snapshot/index.html">RenderingAndSnapshot</a>.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":workflow-runtime:dokkaHtmlPartial/commonMain" data-filterable-set=":workflow-runtime:dokkaHtmlPartial/commonMain"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span><span>interceptors</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">An optional list of <a href="-workflow-interceptor/index.html">WorkflowInterceptor</a>s that will wrap every workflow rendered by the runtime. Interceptors will be invoked in 0-to-<code class="lang-kotlin">length</code> order: the interceptor at index 0 will process the workflow first, then the interceptor at index 1, etc.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":workflow-runtime:dokkaHtmlPartial/commonMain" data-filterable-set=":workflow-runtime:dokkaHtmlPartial/commonMain"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span>on</span><wbr><span><span>Output</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">A function that will be called whenever the root workflow emits an <a href="render-workflow-in.html">OutputT</a>. This is a suspend function, and is invoked synchronously within the runtime: if it suspends, the workflow runtime will effectively be paused until it returns. This means that it will propagate backpressure if used to forward outputs to a <span data-unresolved-link="kotlinx.coroutines.flow/Flow///PointingToDeclaration/">Flow</span> or <span data-unresolved-link="kotlinx.coroutines.channels/Channel///PointingToDeclaration/">Channel</span>, for example.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":workflow-runtime:dokkaHtmlPartial/commonMain" data-filterable-set=":workflow-runtime:dokkaHtmlPartial/commonMain"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><u><span>runtime</span><wbr><span><span>Config</span></span></u></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">Configuration parameters for the Workflow Runtime.</p></div></div></div></div></div></div></div></div></div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2023 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
    </div>
</div>

</body></html>

